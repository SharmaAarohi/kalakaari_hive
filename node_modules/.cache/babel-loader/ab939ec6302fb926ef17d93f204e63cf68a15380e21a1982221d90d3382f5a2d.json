{"ast":null,"code":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar _events = require('events');\nvar _events2 = _interopRequireDefault(_events);\nvar _bluebird = require('bluebird');\nvar _bluebird2 = _interopRequireDefault(_bluebird);\nvar _config = require('../config');\nvar _config2 = _interopRequireDefault(_config);\nvar _methods = require('./methods');\nvar _methods2 = _interopRequireDefault(_methods);\nvar _transports = require('./transports');\nvar _transports2 = _interopRequireDefault(_transports);\nvar _http = require('./transports/http');\nvar _utils = require('../utils');\nvar _ecc = require('../auth/ecc');\nvar _serializer = require('../auth/serializer');\nvar _rpcAuth = require('@steemit/rpc-auth');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\nvar Hive = function (_EventEmitter) {\n  _inherits(Hive, _EventEmitter);\n  function Hive() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Hive);\n    var _this = _possibleConstructorReturn(this, (Hive.__proto__ || Object.getPrototypeOf(Hive)).call(this, options));\n    _this._setTransport(options);\n    _this._setLogger(options);\n    _this.options = options;\n    _this.seqNo = 0; // used for rpc calls\n    _this.error_count = 0;\n    _this.api_index = 0;\n    _this.error_threshold = 3;\n    _this.alternative_api_endpoints = ['https://api.hive.blog', 'https://anyx.io'];\n    _methods2.default.forEach(function (method) {\n      var methodName = method.method_name || (0, _utils.camelCase)(method.method);\n      var methodParams = method.params || [];\n      _this[methodName + 'With'] = function (options, callback) {\n        var params = {};\n        for (var i = 0; i < methodParams.length; i++) {\n          params[methodParams[i]] = options[methodParams[i]];\n        }\n        return _this.send(method.api, {\n          method: method.method,\n          paramsCondenserApi: methodParams.map(function (param) {\n            return options[param];\n          }),\n          params: params\n        }, callback);\n      };\n      _this[methodName] = function () {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (methodName === 'getAccountHistory' && args.length < 5 && methodParams.length > 4) {\n          methodParams.pop();\n          methodParams.pop();\n        }\n        var options = methodParams.reduce(function (memo, param, i) {\n          memo[param] = args[i]; // eslint-disable-line no-param-reassign\n          return memo;\n        }, {});\n        var callback = args[methodParams.length];\n        return _this[methodName + 'With'](options, callback);\n      };\n      _this[methodName + 'WithAsync'] = _bluebird2.default.promisify(_this[methodName + 'With']);\n      _this[methodName + 'Async'] = _bluebird2.default.promisify(_this[methodName]);\n    });\n    _this.callAsync = _bluebird2.default.promisify(_this.call);\n    _this.signedCallAsync = _bluebird2.default.promisify(_this.signedCall);\n    // console.log(\"Alternate endpoints: \", this.options.alternative_api_endpoints);\n    // console.log(\"Failover Threshold (errors): \", this.options.failover_threshold);\n    _this.notifyError = _this.notifyError.bind(_this);\n    return _this;\n  }\n  _createClass(Hive, [{\n    key: '_setTransport',\n    value: function _setTransport(options) {\n      if (options.url && options.url.match('^((http|https)?:\\/\\/)')) {\n        options.uri = options.url;\n        options.transport = 'http';\n        this._transportType = options.transport;\n        this.options = options;\n        this.transport = new _transports2.default.http(options);\n      } else if (options.url && options.url.match('^((ws|wss)?:\\/\\/)')) {\n        options.websocket = options.url;\n        options.transport = 'ws';\n        this._transportType = options.transport;\n        this.options = options;\n        this.transport = new _transports2.default.ws(options);\n      } else if (options.transport) {\n        if (this.transport && this._transportType !== options.transport) {\n          this.transport.stop();\n        }\n        this._transportType = options.transport;\n        if (typeof options.transport === 'string') {\n          if (!_transports2.default[options.transport]) {\n            throw new TypeError('Invalid `transport`, valid values are `http`, `ws` or a class');\n          }\n          this.transport = new _transports2.default[options.transport](options);\n        } else {\n          this.transport = new options.transport(options);\n        }\n      } else {\n        this.transport = new _transports2.default.ws(options);\n      }\n    }\n  }, {\n    key: '_setLogger',\n    value: function _setLogger(options) {\n      if (options.hasOwnProperty('logger')) {\n        switch (_typeof(options.logger)) {\n          case 'function':\n            this.__logger = {\n              log: options.logger\n            };\n            break;\n          case 'object':\n            if (typeof options.logger.log !== 'function') {\n              throw new Error('setOptions({logger:{}}) must have a property .log of type function');\n            }\n            this.__logger = options.logger;\n            break;\n          case 'undefined':\n            if (this.__logger) break;\n          default:\n            this.__logger = false;\n        }\n      }\n    }\n  }, {\n    key: 'log',\n    value: function log(logLevel) {\n      if (this.__logger) {\n        if (arguments.length > 1 && typeof this.__logger[logLevel] === 'function') {\n          var args = Array.prototype.slice.call(arguments, 1);\n          this.__logger[logLevel].apply(this.__logger, args);\n        } else {\n          this.__logger.log.apply(this.__logger, arguments);\n        }\n      }\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      return this.transport.start();\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      return this.transport.stop();\n    }\n  }, {\n    key: 'send',\n    value: function send(api, data, callback) {\n      var cb = callback;\n      if (this.__logger) {\n        var id = Math.random();\n        var self = this;\n        this.log('xmit:' + id + ':', data);\n        cb = function cb(e, d) {\n          if (e) {\n            self.log('error', 'rsp:' + id + ':\\n\\n', e, d);\n          } else {\n            self.log('rsp:' + id + ':', d);\n          }\n          if (callback) {\n            callback.apply(self, arguments);\n          }\n        };\n      }\n      return this.transport.send(api, data, cb);\n    }\n  }, {\n    key: 'call',\n    value: function call(method, params, callback) {\n      var _this2 = this;\n      if (this._transportType !== 'http') {\n        callback(new Error('RPC methods can only be called when using http transport'));\n        return;\n      }\n      var id = ++this.seqNo;\n      (0, _http.jsonRpc)(this.options.uri, {\n        method: method,\n        params: params,\n        id: id\n      }).then(function (res) {\n        callback(null, res);\n      }, function (err) {\n        _this2.notifyError(err, err instanceof _http.RPCError);\n        callback(err);\n      });\n    }\n  }, {\n    key: 'signedCall',\n    value: function signedCall(method, params, account, key, callback) {\n      var _this3 = this;\n      if (this._transportType !== 'http') {\n        callback(new Error('RPC methods can only be called when using http transport'));\n        return;\n      }\n      var id = ++this.seqNo;\n      var request = void 0;\n      try {\n        request = (0, _rpcAuth.sign)({\n          method: method,\n          params: params,\n          id: id\n        }, account, [key]);\n      } catch (error) {\n        callback(error);\n        return;\n      }\n      (0, _http.jsonRpc)(this.options.uri, request).then(function (res) {\n        callback(null, res);\n      }, function (err) {\n        callback(err);\n        _this3.notifyError(err);\n      });\n    }\n  }, {\n    key: 'setOptions',\n    value: function setOptions(options) {\n      Object.assign(this.options, options);\n      if (options.hasOwnProperty('useAppbaseApi')) _config2.default.set('useAppbaseApi', options.useAppbaseApi);\n      if (options.hasOwnProperty('failover_threshold')) this.failover_threshold = options.failover_threshold;\n      if (options.hasOwnProperty('alternative_api_endpoints')) this.alternative_api_endpoints = options.alternative_api_endpoints;\n      this._setLogger(options);\n      this._setTransport(options);\n      this.transport.setOptions(options);\n      if (options.hasOwnProperty('useTestNet')) {\n        _config2.default.set('address_prefix', options.useTestNet ? 'TST' : 'STM');\n      }\n      if (options.hasOwnProperty('url')) {\n        var new_index = 0;\n        for (var i = 0; i < this.alternative_api_endpoints.length; i++) {\n          var temp_endpoint = this.alternative_api_endpoints[i];\n          if (temp_endpoint === options.url) {\n            new_index = i;\n            break;\n          }\n        }\n        this.api_index = new_index;\n        var new_endpoint = this.alternative_api_endpoints[this.api_index];\n      }\n    }\n  }, {\n    key: 'setWebSocket',\n    value: function setWebSocket(url) {\n      this.setOptions({\n        websocket: url\n      });\n    }\n  }, {\n    key: 'setUri',\n    value: function setUri(url) {\n      this.setOptions({\n        uri: url\n      });\n    }\n  }, {\n    key: 'streamBlockNumber',\n    value: function streamBlockNumber() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n      var _this4 = this;\n      var callback = arguments[1];\n      var ts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;\n      if (typeof mode === 'function') {\n        callback = mode;\n        mode = 'head';\n      }\n      var current = '';\n      var running = true;\n      var update = function update() {\n        if (!running) return;\n        _this4.getDynamicGlobalPropertiesAsync().then(function (result) {\n          var blockId = mode === 'irreversible' ? result.last_irreversible_block_num : result.head_block_number;\n          if (blockId !== current) {\n            if (current) {\n              for (var i = current; i < blockId; i++) {\n                if (i !== current) {\n                  callback(null, i);\n                }\n                current = i;\n              }\n            } else {\n              current = blockId;\n              callback(null, blockId);\n            }\n          }\n          _bluebird2.default.delay(ts).then(function () {\n            update();\n          });\n        }, function (err) {\n          callback(err);\n        });\n      };\n      update();\n      return function () {\n        running = false;\n      };\n    }\n  }, {\n    key: 'streamBlock',\n    value: function streamBlock() {\n      var _this5 = this;\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n      var callback = arguments[1];\n      if (typeof mode === 'function') {\n        callback = mode;\n        mode = 'head';\n      }\n      var current = '';\n      var last = '';\n      var release = this.streamBlockNumber(mode, function (err, id) {\n        if (err) {\n          release();\n          callback(err);\n          return;\n        }\n        current = id;\n        if (current !== last) {\n          last = current;\n          _this5.getBlock(current, callback);\n        }\n      });\n      return release;\n    }\n  }, {\n    key: 'streamTransactions',\n    value: function streamTransactions() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n      var callback = arguments[1];\n      if (typeof mode === 'function') {\n        callback = mode;\n        mode = 'head';\n      }\n      var release = this.streamBlock(mode, function (err, result) {\n        if (err) {\n          release();\n          callback(err);\n          return;\n        }\n        if (result && result.transactions) {\n          result.transactions.forEach(function (transaction) {\n            callback(null, transaction);\n          });\n        }\n      });\n      return release;\n    }\n  }, {\n    key: 'streamOperations',\n    value: function streamOperations() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n      var callback = arguments[1];\n      if (typeof mode === 'function') {\n        callback = mode;\n        mode = 'head';\n      }\n      var release = this.streamTransactions(mode, function (err, transaction) {\n        if (err) {\n          release();\n          callback(err);\n          return;\n        }\n        transaction.operations.forEach(function (operation) {\n          callback(null, operation);\n        });\n      });\n      return release;\n    }\n  }, {\n    key: 'broadcastTransactionSynchronousWith',\n    value: function broadcastTransactionSynchronousWith(options, callback) {\n      var trx = options.trx;\n      return this.send('network_broadcast_api', {\n        method: 'broadcast_transaction_synchronous',\n        params: [trx]\n      }, function (err, result) {\n        if (err) {\n          var signed_transaction = _serializer.ops.signed_transaction;\n          // console.log('-- broadcastTransactionSynchronous -->', JSON.stringify(signed_transaction.toObject(trx), null, 2));\n          // toObject converts objects into serializable types\n\n          var trObject = signed_transaction.toObject(trx);\n          var buf = signed_transaction.toBuffer(trx);\n          err.digest = _ecc.hash.sha256(buf).toString('hex');\n          err.transaction_id = buf.toString('hex');\n          err.transaction = JSON.stringify(trObject);\n          callback(err, '');\n        } else {\n          callback('', result);\n        }\n      });\n    }\n  }, {\n    key: 'notifyError',\n    value: function notifyError(err) {\n      var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (ignore) {\n        return;\n      }\n      if (this.failover_threshold === undefined || this.alternative_api_endpoints === undefined) {\n        return;\n      }\n      if (err && err.toString().includes(\"overseer\")) {\n        //overseer was a steem thing, it doesn't exist in hive so don't count this error towards failover\n        return;\n      }\n      this.error_count++;\n      if (this.error_count >= this.failover_threshold) {\n        var current_url = this.options.url;\n        this.error_count = 0;\n        this.api_index++;\n        if (this.api_index >= this.alternative_api_endpoints.length) {\n          this.api_index = 0;\n        }\n        var nextEndpoint = this.alternative_api_endpoints[this.api_index];\n        // console.log(\"failing over. old endpoint was: \", current_url, \" new one is: \", nextEndpoint);\n        this.setOptions({\n          url: nextEndpoint\n        });\n      }\n    }\n  }]);\n  return Hive;\n}(_events2.default);\n\n// Export singleton instance\n\nvar hive = new Hive(_config2.default);\nexports = module.exports = hive;\nexports.Hive = Hive;","map":{"version":3,"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","_events","require","_events2","_interopRequireDefault","_bluebird","_bluebird2","_config","_config2","_methods","_methods2","_transports","_transports2","_http","_utils","_ecc","_serializer","_rpcAuth","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","value","setPrototypeOf","__proto__","Hive","_EventEmitter","options","arguments","undefined","_this","getPrototypeOf","_setTransport","_setLogger","seqNo","error_count","api_index","error_threshold","alternative_api_endpoints","forEach","method","methodName","method_name","camelCase","methodParams","params","callback","send","api","paramsCondenserApi","map","param","_len","args","Array","_key","pop","reduce","memo","promisify","callAsync","signedCallAsync","signedCall","notifyError","bind","url","match","uri","transport","_transportType","http","websocket","ws","stop","hasOwnProperty","logger","__logger","log","Error","logLevel","slice","apply","start","data","cb","id","Math","random","e","d","_this2","jsonRpc","then","res","err","RPCError","account","_this3","request","sign","error","setOptions","assign","set","useAppbaseApi","failover_threshold","useTestNet","new_index","temp_endpoint","new_endpoint","setWebSocket","setUri","streamBlockNumber","mode","_this4","ts","current","running","update","getDynamicGlobalPropertiesAsync","result","blockId","last_irreversible_block_num","head_block_number","delay","streamBlock","_this5","last","release","getBlock","streamTransactions","transactions","transaction","streamOperations","operations","operation","broadcastTransactionSynchronousWith","trx","signed_transaction","ops","trObject","toObject","buf","toBuffer","digest","hash","sha256","toString","transaction_id","JSON","stringify","ignore","includes","current_url","nextEndpoint","hive","exports","module"],"sources":["C:/Users/sunil/kalakaari/node_modules/@hiveio/hive-js/lib/api/index.js"],"sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _events = require('events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _config = require('../config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _methods = require('./methods');\n\nvar _methods2 = _interopRequireDefault(_methods);\n\nvar _transports = require('./transports');\n\nvar _transports2 = _interopRequireDefault(_transports);\n\nvar _http = require('./transports/http');\n\nvar _utils = require('../utils');\n\nvar _ecc = require('../auth/ecc');\n\nvar _serializer = require('../auth/serializer');\n\nvar _rpcAuth = require('@steemit/rpc-auth');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Hive = function (_EventEmitter) {\n    _inherits(Hive, _EventEmitter);\n\n    function Hive() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Hive);\n\n        var _this = _possibleConstructorReturn(this, (Hive.__proto__ || Object.getPrototypeOf(Hive)).call(this, options));\n\n        _this._setTransport(options);\n        _this._setLogger(options);\n        _this.options = options;\n        _this.seqNo = 0; // used for rpc calls\n        _this.error_count = 0;\n        _this.api_index = 0;\n        _this.error_threshold = 3;\n        _this.alternative_api_endpoints = ['https://api.hive.blog', 'https://anyx.io'];\n        _methods2.default.forEach(function (method) {\n            var methodName = method.method_name || (0, _utils.camelCase)(method.method);\n            var methodParams = method.params || [];\n\n            _this[methodName + 'With'] = function (options, callback) {\n                var params = {};\n                for (var i = 0; i < methodParams.length; i++) {\n                    params[methodParams[i]] = options[methodParams[i]];\n                }\n                return _this.send(method.api, {\n                    method: method.method,\n                    paramsCondenserApi: methodParams.map(function (param) {\n                        return options[param];\n                    }),\n                    params: params\n                }, callback);\n            };\n\n            _this[methodName] = function () {\n                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                }\n\n                if (methodName === 'getAccountHistory' && args.length < 5 && methodParams.length > 4) {\n                    methodParams.pop();\n                    methodParams.pop();\n                }\n                var options = methodParams.reduce(function (memo, param, i) {\n                    memo[param] = args[i]; // eslint-disable-line no-param-reassign\n                    return memo;\n                }, {});\n                var callback = args[methodParams.length];\n                return _this[methodName + 'With'](options, callback);\n            };\n\n            _this[methodName + 'WithAsync'] = _bluebird2.default.promisify(_this[methodName + 'With']);\n            _this[methodName + 'Async'] = _bluebird2.default.promisify(_this[methodName]);\n        });\n        _this.callAsync = _bluebird2.default.promisify(_this.call);\n        _this.signedCallAsync = _bluebird2.default.promisify(_this.signedCall);\n        // console.log(\"Alternate endpoints: \", this.options.alternative_api_endpoints);\n        // console.log(\"Failover Threshold (errors): \", this.options.failover_threshold);\n        _this.notifyError = _this.notifyError.bind(_this);\n        return _this;\n    }\n\n    _createClass(Hive, [{\n        key: '_setTransport',\n        value: function _setTransport(options) {\n            if (options.url && options.url.match('^((http|https)?:\\/\\/)')) {\n                options.uri = options.url;\n                options.transport = 'http';\n                this._transportType = options.transport;\n                this.options = options;\n                this.transport = new _transports2.default.http(options);\n            } else if (options.url && options.url.match('^((ws|wss)?:\\/\\/)')) {\n                options.websocket = options.url;\n                options.transport = 'ws';\n                this._transportType = options.transport;\n                this.options = options;\n                this.transport = new _transports2.default.ws(options);\n            } else if (options.transport) {\n                if (this.transport && this._transportType !== options.transport) {\n                    this.transport.stop();\n                }\n\n                this._transportType = options.transport;\n\n                if (typeof options.transport === 'string') {\n                    if (!_transports2.default[options.transport]) {\n                        throw new TypeError('Invalid `transport`, valid values are `http`, `ws` or a class');\n                    }\n                    this.transport = new _transports2.default[options.transport](options);\n                } else {\n                    this.transport = new options.transport(options);\n                }\n            } else {\n                this.transport = new _transports2.default.ws(options);\n            }\n        }\n    }, {\n        key: '_setLogger',\n        value: function _setLogger(options) {\n            if (options.hasOwnProperty('logger')) {\n                switch (_typeof(options.logger)) {\n                    case 'function':\n                        this.__logger = {\n                            log: options.logger\n                        };\n                        break;\n                    case 'object':\n                        if (typeof options.logger.log !== 'function') {\n                            throw new Error('setOptions({logger:{}}) must have a property .log of type function');\n                        }\n                        this.__logger = options.logger;\n                        break;\n                    case 'undefined':\n                        if (this.__logger) break;\n                    default:\n                        this.__logger = false;\n                }\n            }\n        }\n    }, {\n        key: 'log',\n        value: function log(logLevel) {\n            if (this.__logger) {\n                if (arguments.length > 1 && typeof this.__logger[logLevel] === 'function') {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    this.__logger[logLevel].apply(this.__logger, args);\n                } else {\n                    this.__logger.log.apply(this.__logger, arguments);\n                }\n            }\n        }\n    }, {\n        key: 'start',\n        value: function start() {\n            return this.transport.start();\n        }\n    }, {\n        key: 'stop',\n        value: function stop() {\n            return this.transport.stop();\n        }\n    }, {\n        key: 'send',\n        value: function send(api, data, callback) {\n            var cb = callback;\n            if (this.__logger) {\n                var id = Math.random();\n                var self = this;\n                this.log('xmit:' + id + ':', data);\n                cb = function cb(e, d) {\n                    if (e) {\n                        self.log('error', 'rsp:' + id + ':\\n\\n', e, d);\n                    } else {\n                        self.log('rsp:' + id + ':', d);\n                    }\n                    if (callback) {\n                        callback.apply(self, arguments);\n                    }\n                };\n            }\n            return this.transport.send(api, data, cb);\n        }\n    }, {\n        key: 'call',\n        value: function call(method, params, callback) {\n            var _this2 = this;\n\n            if (this._transportType !== 'http') {\n                callback(new Error('RPC methods can only be called when using http transport'));\n                return;\n            }\n            var id = ++this.seqNo;\n            (0, _http.jsonRpc)(this.options.uri, { method: method, params: params, id: id }).then(function (res) {\n                callback(null, res);\n            }, function (err) {\n                _this2.notifyError(err, err instanceof _http.RPCError);callback(err);\n            });\n        }\n    }, {\n        key: 'signedCall',\n        value: function signedCall(method, params, account, key, callback) {\n            var _this3 = this;\n\n            if (this._transportType !== 'http') {\n                callback(new Error('RPC methods can only be called when using http transport'));\n                return;\n            }\n            var id = ++this.seqNo;\n            var request = void 0;\n            try {\n                request = (0, _rpcAuth.sign)({ method: method, params: params, id: id }, account, [key]);\n            } catch (error) {\n                callback(error);\n                return;\n            }\n            (0, _http.jsonRpc)(this.options.uri, request).then(function (res) {\n                callback(null, res);\n            }, function (err) {\n                callback(err);_this3.notifyError(err);\n            });\n        }\n    }, {\n        key: 'setOptions',\n        value: function setOptions(options) {\n            Object.assign(this.options, options);\n\n            if (options.hasOwnProperty('useAppbaseApi')) _config2.default.set('useAppbaseApi', options.useAppbaseApi);\n            if (options.hasOwnProperty('failover_threshold')) this.failover_threshold = options.failover_threshold;\n            if (options.hasOwnProperty('alternative_api_endpoints')) this.alternative_api_endpoints = options.alternative_api_endpoints;\n\n            this._setLogger(options);\n            this._setTransport(options);\n            this.transport.setOptions(options);\n            if (options.hasOwnProperty('useTestNet')) {\n                _config2.default.set('address_prefix', options.useTestNet ? 'TST' : 'STM');\n            }\n\n            if (options.hasOwnProperty('url')) {\n                var new_index = 0;\n                for (var i = 0; i < this.alternative_api_endpoints.length; i++) {\n                    var temp_endpoint = this.alternative_api_endpoints[i];\n                    if (temp_endpoint === options.url) {\n                        new_index = i;\n                        break;\n                    }\n                }\n                this.api_index = new_index;\n                var new_endpoint = this.alternative_api_endpoints[this.api_index];\n            }\n        }\n    }, {\n        key: 'setWebSocket',\n        value: function setWebSocket(url) {\n            this.setOptions({\n                websocket: url\n            });\n        }\n    }, {\n        key: 'setUri',\n        value: function setUri(url) {\n            this.setOptions({\n                uri: url\n            });\n        }\n    }, {\n        key: 'streamBlockNumber',\n        value: function streamBlockNumber() {\n            var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n\n            var _this4 = this;\n\n            var callback = arguments[1];\n            var ts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 200;\n\n            if (typeof mode === 'function') {\n                callback = mode;\n                mode = 'head';\n            }\n            var current = '';\n            var running = true;\n\n            var update = function update() {\n                if (!running) return;\n\n                _this4.getDynamicGlobalPropertiesAsync().then(function (result) {\n                    var blockId = mode === 'irreversible' ? result.last_irreversible_block_num : result.head_block_number;\n\n                    if (blockId !== current) {\n                        if (current) {\n                            for (var i = current; i < blockId; i++) {\n                                if (i !== current) {\n                                    callback(null, i);\n                                }\n                                current = i;\n                            }\n                        } else {\n                            current = blockId;\n                            callback(null, blockId);\n                        }\n                    }\n\n                    _bluebird2.default.delay(ts).then(function () {\n                        update();\n                    });\n                }, function (err) {\n                    callback(err);\n                });\n            };\n\n            update();\n\n            return function () {\n                running = false;\n            };\n        }\n    }, {\n        key: 'streamBlock',\n        value: function streamBlock() {\n            var _this5 = this;\n\n            var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n            var callback = arguments[1];\n\n            if (typeof mode === 'function') {\n                callback = mode;\n                mode = 'head';\n            }\n\n            var current = '';\n            var last = '';\n\n            var release = this.streamBlockNumber(mode, function (err, id) {\n                if (err) {\n                    release();\n                    callback(err);\n                    return;\n                }\n\n                current = id;\n                if (current !== last) {\n                    last = current;\n                    _this5.getBlock(current, callback);\n                }\n            });\n\n            return release;\n        }\n    }, {\n        key: 'streamTransactions',\n        value: function streamTransactions() {\n            var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n            var callback = arguments[1];\n\n            if (typeof mode === 'function') {\n                callback = mode;\n                mode = 'head';\n            }\n\n            var release = this.streamBlock(mode, function (err, result) {\n                if (err) {\n                    release();\n                    callback(err);\n                    return;\n                }\n\n                if (result && result.transactions) {\n                    result.transactions.forEach(function (transaction) {\n                        callback(null, transaction);\n                    });\n                }\n            });\n\n            return release;\n        }\n    }, {\n        key: 'streamOperations',\n        value: function streamOperations() {\n            var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'head';\n            var callback = arguments[1];\n\n            if (typeof mode === 'function') {\n                callback = mode;\n                mode = 'head';\n            }\n\n            var release = this.streamTransactions(mode, function (err, transaction) {\n                if (err) {\n                    release();\n                    callback(err);\n                    return;\n                }\n\n                transaction.operations.forEach(function (operation) {\n                    callback(null, operation);\n                });\n            });\n\n            return release;\n        }\n    }, {\n        key: 'broadcastTransactionSynchronousWith',\n        value: function broadcastTransactionSynchronousWith(options, callback) {\n            var trx = options.trx;\n            return this.send('network_broadcast_api', {\n                method: 'broadcast_transaction_synchronous',\n                params: [trx]\n            }, function (err, result) {\n                if (err) {\n                    var signed_transaction = _serializer.ops.signed_transaction;\n                    // console.log('-- broadcastTransactionSynchronous -->', JSON.stringify(signed_transaction.toObject(trx), null, 2));\n                    // toObject converts objects into serializable types\n\n                    var trObject = signed_transaction.toObject(trx);\n                    var buf = signed_transaction.toBuffer(trx);\n                    err.digest = _ecc.hash.sha256(buf).toString('hex');\n                    err.transaction_id = buf.toString('hex');\n                    err.transaction = JSON.stringify(trObject);\n                    callback(err, '');\n                } else {\n                    callback('', result);\n                }\n            });\n        }\n    }, {\n        key: 'notifyError',\n        value: function notifyError(err) {\n            var ignore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            if (ignore) {\n                return;\n            }\n            if (this.failover_threshold === undefined || this.alternative_api_endpoints === undefined) {\n                return;\n            }\n            if (err && err.toString().includes(\"overseer\")) {\n                //overseer was a steem thing, it doesn't exist in hive so don't count this error towards failover\n                return;\n            }\n            this.error_count++;\n            if (this.error_count >= this.failover_threshold) {\n                var current_url = this.options.url;\n                this.error_count = 0;\n                this.api_index++;\n                if (this.api_index >= this.alternative_api_endpoints.length) {\n                    this.api_index = 0;\n                }\n                var nextEndpoint = this.alternative_api_endpoints[this.api_index];\n                // console.log(\"failing over. old endpoint was: \", current_url, \" new one is: \", nextEndpoint);\n                this.setOptions({ url: nextEndpoint });\n            }\n        }\n    }]);\n\n    return Hive;\n}(_events2.default);\n\n// Export singleton instance\n\n\nvar hive = new Hive(_config2.default);\nexports = module.exports = hive;\nexports.Hive = Hive;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}